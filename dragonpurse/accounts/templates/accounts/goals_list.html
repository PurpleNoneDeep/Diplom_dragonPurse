{% extends "accounts/base.html" %}
{% block content %}
<h1>–ú–æ–∏ —Ü–µ–ª–∏</h1>
<p><a href="{% url 'add_goal' %}">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ü–µ–ª—å</a></p>
<a href="{% url 'shared_users_list' %}" class="button">üë• –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–µ–ª–∏ –¥—Ä—É–≥–∞</a>

{% for g in goals %}
<div class="card" style="padding:15px; margin-bottom:15px; border:1px solid #ccc; border-radius:10px;">
  <h2>{{ g.name }}</h2>
  <p>{{ g.description }}</p>
  <p>–î–µ–¥–ª–∞–π–Ω: {{ g.deadline }}</p>
  <p>–¶–µ–ª—å: {{ g.amount }} ‚ÇΩ | –ù–∞–∫–æ–ø–ª–µ–Ω–æ: {{ g.saved }} BYN</p>
  <p>–°—Ç–∞—Ç—É—Å: {{ g.status }}</p>
  <div style="background:#ddd; border-radius:10px; height:20px; margin-bottom:10px;">
      <div style="width:{{ g.percent }}%; background-color:{{ g.color }}; height:100%; border-radius:10px; text-align:center; color:white; font-size:12px;">
          {{ g.percent }}%
      </div>
  </div>

  <a href="{% url 'goal_detail' g.id %}" class="btn btn-primary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ—Ç–∞–ª–∏</a>
  <button onclick="confirmDelete({{ g.id }})" class="btn btn-danger">–£–¥–∞–ª–∏—Ç—å</button>

  <form id="deleteForm{{ g.id }}" method="post" action="{% url 'goal_delete' g.id %}" style="display:none;">
      {% csrf_token %}
  </form>
</div>
{% empty %}
<p>–ü–æ–∫–∞ –Ω–µ—Ç —Ü–µ–ª–µ–π. <a href="{% url 'add_goal' %}">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ü–µ–ª—å</a></p>
{% endfor %}

<script>
function confirmDelete(goalId) {
    if (confirm("–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ü–µ–ª—å?")) {
        document.getElementById('deleteForm' + goalId).submit();
    }
}
</script>
{% endblock %}
