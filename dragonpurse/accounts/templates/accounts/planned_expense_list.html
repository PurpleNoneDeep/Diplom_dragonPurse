{% extends "accounts/base.html" %}
{% load static %}
{% block head %}<link rel="stylesheet" href="{% static 'accounts/css/dashboard.css' %}">
<link rel="stylesheet" href="{% static 'accounts/css/theme.css' %}">{% endblock %}
{% block content %}

 <div class="sidebar">
        <h1>DragonPurse</h1>

        <a href="{% url 'transaction_list' %}"><button>Календарь</button></a>
        <a href="{% url 'planned_expense_create' %}"><button>Добавить запланированную транзакцию</button></a>
        <a href="{% url 'notifications_inbox' %}"><button>Уведомления</button></a>
        <a href="{% url 'report_builder' %}"><button>Аналитика</button></a>
        <a href="{% url 'goals_list' %}"><button>Цели</button></a>
        <a href="{% url 'wishlist_list' %}"><button>Список желаний</button></a>
        <a href="{% url 'login' %}"><button>Настройки</button></a>
        <div class="line"></div>
        <a href="{% url 'logout' %}"><button>Выйти</button></a>

    </div>
<main>
{% if messages %}
            {% for m in messages %}
                <div class="alert" style="color:#ffcc00; margin-bottom:10px;">{{ m }}</div>
            {% endfor %}
{% endif %}
<h1>Запланированные транзакции</h1>


{% if planned_items %}
<table border="1" cellpadding="8" style="border-collapse:collapse; width:100%; margin-top:10px;">
  <thead style="background:#f5f5f5;">
    <tr>
      <th>Название</th>
      <th>Описание</th>
      <th>Дата</th>
      <th>Повторение</th>
      <th>Статус</th>
      <th>Напоминание</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody>
    {% for item in planned_items %}
    <tr>
      <td>{{ item.name }}</td>
      <td>{{ item.description|default:"—" }}</td>
      <td>{{ item.date|date:"d.m.Y" }}</td>
      <td>{{ item.get_repeat_display|default:"—" }}</td>
      <td>{{ item.get_status_display|default:"—" }}</td>
      <td>{% if item.reminder %}✅{% else %}—{% endif %}</td>
      <td>
        <a href="{% url 'planned_edit' item.pk %}">Изменить</a> |
        <a href="{% url 'planned_expense_delete' item.pk %}">Удалить</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>Нет запланированных транзакций. Добавьте первую!</p>
{% endif %}
    </main>
{% endblock %}

