{% extends "base.html" %}

{% block content %}
<h1>üéØ {{ goal.name }}</h1>

<p><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong> {{ goal.description }}</p>
<p><strong>–î–µ–¥–ª–∞–π–Ω:</strong> {{ goal.deadline }}</p>
<p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ goal.get_status_display }}</p>

<h3>üí∞ –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è:</h3>
<div style="width:100%; background-color:#eee; border-radius:10px; height:25px;">
  <div style="width:{{ percent }}%; background-color:#4caf50; height:100%; border-radius:10px; color:white; text-align:center; line-height:25px;">
    {{ percent }}%
  </div>
</div>
<p><strong>–ù–∞–∫–æ–ø–ª–µ–Ω–æ:</strong> {{ total_saved|floatformat:2 }} ‚ÇΩ –∏–∑ {{ total_goal_amount|floatformat:2 }} ‚ÇΩ</p>

<hr>

<h3>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
<table border="1" cellpadding="8" style="border-collapse:collapse;">
  <thead>
    <tr>
      <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
      <th>–¶–µ–ª–µ–≤–∞—è —Å—É–º–º–∞</th>
    </tr>
  </thead>
  <tbody>
    {% for p in participants %}
    <tr>
      <td>{{ p.user.username }} ({{ p.user.email }})</td>
      <td>{{ p.amount|floatformat:2 }} ‚ÇΩ</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<hr>

<h3>üìú –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</h3>
<table border="1" cellpadding="8" style="border-collapse:collapse;">
  <thead>
    <tr>
      <th>–î–∞—Ç–∞</th>
      <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
      <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
      <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
      <th>–°—É–º–º–∞</th>
    </tr>
  </thead>
  <tbody>
    {% for t in transactions %}
    <tr>
      <td>{{ t.date|date:"d.m.Y H:i" }}</td>
      <td>{{ t.user.username }}</td>
      <td>{{ t.category.name if t.category else "–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" }}</td>
      <td>{{ t.description }}</td>
      <td>{{ t.amount|floatformat:2 }} ‚ÇΩ</td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="5" style="text-align:center;">–ü–æ–∫–∞ –Ω–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div style="margin-top:20px;">
  <a href="{% url 'yourapp:goals_list' %}" class="button">‚¨Ö –ù–∞–∑–∞–¥ –∫ —Ü–µ–ª—è–º</a>
</div>
{% endblock %}
